{"version":3,"file":"static/js/38.9ed1aa90.chunk.js","mappings":"gTAmBe,SAASA,EAAUC,GAC9B,MAAOC,EAAeC,IAAmBC,EAAAA,EAAAA,WAAS,GAC5CC,EAA4B,aAAfJ,EAAMK,KACnBC,EAAaN,EAAMO,OAASP,EAAMO,MAAMC,OAAOC,OAAS,EAC9D,OACIC,EAAAA,EAAAA,MAAA,OAAKC,UAAW,cAAcX,EAAMY,aAAaC,SAAA,EAC7CC,EAAAA,EAAAA,KAAA,SAAQC,KAAMf,EAAMK,KACZA,KAAMD,GAAcH,EAAc,OAASD,EAAMK,KACjDW,MAAQhB,EAAMK,KACdE,MAAOP,EAAMO,MACbU,SAAUjB,EAAMiB,SAAUC,UAAQ,KAC1CJ,EAAAA,EAAAA,KAAA,QAAMH,UAAW,eAAcL,EAAa,cAAgB,IAAKO,SAAEb,EAAMmB,SACxEf,IACGM,EAAAA,EAAAA,MAAA,QAAMU,QAASA,IAAMlB,GAAgBmB,IAASA,IAAMR,SAAA,EAC5CC,EAAAA,EAAAA,KAAA,OAAMH,UAAU,kBAAkBW,IAAKrB,EAAcsB,EAAKC,EAAMC,IAAI,oBAAmB,SAI/G,C,4ICxBe,SAASC,EAAS1B,GAG7B,MAAO2B,EAAgBC,IAAqBzB,EAAAA,EAAAA,UAAS,KAC/C,KAAC0B,EAAI,QAAEC,IAAWC,EAAAA,EAAAA,YAAWC,EAAAA,IAC5BC,EAAUC,IAAe/B,EAAAA,EAAAA,UAAS,KAEzCgC,EAAAA,EAAAA,YAAU,KACgBC,WAElB,IACI,MAAMC,QAAiBC,EAAAA,EAAcC,IAAI,kBAAkBV,EAAKW,gBAC1C,MAAlBH,EAASI,SACTC,QAAQC,IAAIN,EAASO,KAAKC,SAC1BH,QAAQC,IAAIN,EAASO,KAAKE,OAC1BZ,EAAYG,EAASO,KAAKE,OAElC,CACA,MAAMC,GAAK,IAADC,EAAAC,EACNP,QAAQC,IAAII,GACZL,QAAQC,IAAgB,QAAbK,EAACD,EAAIV,gBAAQ,IAAAW,GAAM,QAANC,EAAZD,EAAcJ,YAAI,IAAAK,OAAN,EAAZA,EAAoBJ,QACpC,GAEJK,EAAe,GAChB,CAACrB,KAEJM,EAAAA,EAAAA,YAAU,MACsBC,iBACpB,IADgCe,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,IAAE,GACzB,GAAKlB,EAAS,CACnBS,QAAQC,IAAI,sDACZ,MAAMU,QAAmBC,QAAQC,IAAItB,EAASuB,KAAIpB,UAAqB,IAADqB,EAClE,MAAMC,EAASC,EAASC,kBAChBC,EAAAA,EAAAA,IAAaF,EAASG,eACtBD,EAAAA,EAAAA,IAAaF,EAASI,aAAaC,MAAKC,GAAUA,KAAe,OAAJpC,QAAI,IAAJA,OAAI,EAAJA,EAAMW,QAE3EE,QAAQC,IAAIe,GACZhB,QAAQC,IAAIgB,GACZ,IAAIO,EAAQ,MACZ,IACI,GAAIP,EAASC,YAET,CACA,MAAMvB,QAAiBC,EAAAA,EAAcC,IAAI,kBAAkBoB,EAASQ,MAAMC,OACrD,MAAlB/B,EAASI,SACRyB,EAAQ7B,EAASO,KAAKuB,MAAMpD,KAC5B2B,QAAQC,IAAIuB,GAEpB,MAPIA,QAAcG,EAAAA,EAAAA,IAAeV,EAASI,aAAaC,MAAKC,GAAUA,KAAe,OAAJpC,QAAI,IAAJA,OAAI,EAAJA,EAAMW,OAQ3F,CAAC,MAAMO,GACHL,QAAQC,IAAII,EAChB,CAIA,OAHQ,QAALU,EAAAS,SAAK,IAAAT,OAAA,EAALA,EAAOhD,QAAO,KAAIyD,GAAQI,EAAAA,EAAAA,IAAeJ,GAAOK,MAAM,EAAE,IAC3D7B,QAAQC,IAAI,UAAUuB,aAAiBR,KAEhC,CAACA,SAAQQ,QAAM,KAE1BtC,EAAkByB,EACtB,CACR,CACAmB,EAAqB,GACtB,CAACvC,EAASJ,IAOb,OAAGC,GAAgBhB,EAAAA,EAAAA,KAAA,OAAAD,SAAK,gBAGxBC,EAAAA,EAAAA,KAAA,OAAKH,UAAU,mBAAmB8D,GAAG,sBAAqB5D,UACtDC,EAAAA,EAAAA,KAAA,MAAIH,UAAU,YAAWE,SACpBc,EAAe6B,KAAI,CAACkB,EAAWC,KAC5BjE,EAAAA,EAAAA,MAAA,MAAIU,QAAUwD,IAAIC,OAXbC,EAWsB7C,EAAS0C,GAAOP,IAVnD1B,QAAQC,IAAI,eAAgBmC,QAC5B9E,EAAM+E,gBAAgBD,GAFTA,KAW2C,EAACnE,UAAU,oBAAoB8D,GAAG,SAAQ5D,SAAA,EACtFC,EAAAA,EAAAA,KAAA,OAAK2D,GAAG,cAAcnD,IAAKoD,EAAUhB,OAAQjC,IAAKiD,EAAUR,SAC5DpD,EAAAA,EAAAA,KAACkE,EAAAA,EAAW,CAAChE,MAAO0D,EAAUR,MAAOe,YAAY,iBAF2CN,QAShH,C,cCrFe,SAASO,EAAQlF,GAC5B,MAAO0D,EAAQyB,IAAahF,EAAAA,EAAAA,UAAS,KAC9BiF,EAAUC,IAAelF,EAAAA,EAAAA,UAAS,KACnC,QAAC0C,GAAW7C,GACZ,KAAC6B,IAAQE,EAAAA,EAAAA,YAAWC,EAAAA,GAkB1B,OAhBAG,EAAAA,EAAAA,YAAU,KACyBC,WAC3B,IACI,MAAMsB,QAAeG,EAAAA,EAAAA,IAAahB,EAAQyC,QACpCC,QAAiBlB,EAAAA,EAAAA,IAAexB,EAAQyC,QAC9CH,EAAUzB,GACV2B,EAAYE,EAChB,CACA,MAAMxC,GACFL,QAAQC,IAAII,EAChB,GAEJyC,EAAwB,GACzB,CAAC3C,EAAQyC,UAIRxE,EAAAA,EAAAA,KAAA,MAAIH,UAAU,kBAAiBE,SAC1BgC,EAAQyC,UAAe,OAAJzD,QAAI,IAAJA,OAAI,EAAJA,EAAMW,MAEtB9B,EAAAA,EAAAA,MAAA+E,EAAAA,SAAA,CAAA5E,SAAA,EACIC,EAAAA,EAAAA,KAAA,OAAKQ,IAAKoC,EAAQjC,IAAK,iBAAkBgD,GAAG,oBAC5C/D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBE,SAAA,EAC5BC,EAAAA,EAAAA,KAAA,OAAKH,UAAU,eAAcE,UAAE6E,EAAAA,EAAAA,IAAc7C,EAAQ8C,cACrDjF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,cAAaE,SAAA,EACxBC,EAAAA,EAAAA,KAAA,OAAKH,UAAU,mBAAkBE,UAACC,EAAAA,EAAAA,KAAA,UAAAD,SAASuE,OAC3CtE,EAAAA,EAAAA,KAAA,OAAKH,UAAU,eAAcE,SAAEgC,EAAQ+C,oBAMnDlF,EAAAA,EAAAA,MAAA+E,EAAAA,SAAA,CAAA5E,SAAA,EACAH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBE,SAAA,EAC5BC,EAAAA,EAAAA,KAAA,OAAKH,UAAU,qBAAoBE,UAAE6E,EAAAA,EAAAA,IAAc7C,EAAQ8C,cAC3DjF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oBAAmBE,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,OAAKH,UAAU,yBAAwBE,UAACC,EAAAA,EAAAA,KAAA,UAAAD,SAASuE,OACjDtE,EAAAA,EAAAA,KAAA,OAAKH,UAAU,qBAAoBE,SAAEgC,EAAQ+C,iBAGrD9E,EAAAA,EAAAA,KAAA,OAAKQ,IAAKoC,EAAQjC,IAAK,iBAAkBgD,GAAG,uBAM5D,C,cClDe,SAASoB,EAAS7F,GAE7B,MAAM8F,GAAYC,EAAAA,EAAAA,QAAO,OAClBC,EAAUC,IAAe9F,EAAAA,EAAAA,UAAS,KAClC+F,EAAOC,IAAYhG,EAAAA,EAAAA,UAAS,KAC7B,KAAC0B,EAAI,MAAEuE,IAASrE,EAAAA,EAAAA,YAAWC,EAAAA,GAC3BqE,GAASN,EAAAA,EAAAA,QAAO,OAChB,OAACO,GAAUtG,GACVuG,EAAQC,IAAarG,EAAAA,EAAAA,WAAS,IAErCgC,EAAAA,EAAAA,YAAU,KACeC,WACjB6D,EAAY,IAEZ,IACIvD,QAAQC,IAAI,wCAAwC2D,KACpD,MAAMjE,QAAiBC,EAAAA,EAAcC,IAAI,UAAU+D,KAC7B,MAAlBjE,EAASI,SACTC,QAAQC,IAAIN,EAASO,KAAKC,SAC1BH,QAAQC,IAAIN,EAASO,KAAKoD,UAC1BC,EAAY5D,EAASO,KAAKoD,UAElC,CACA,MAAMjD,GAAK,IAADC,EAAAC,EACNP,QAAQC,IAAII,GACZL,QAAQC,IAAgB,QAAbK,EAACD,EAAIV,gBAAQ,IAAAW,GAAM,QAANC,EAAZD,EAAcJ,YAAI,IAAAK,OAAN,EAAZA,EAAoBJ,QACpC,GAEJ4D,EAAc,GAChB,CAACH,KAGHnE,EAAAA,EAAAA,YAAU,KACN,IAAImE,IAAWF,EAAO,OACtB,MAAMM,GAASC,EAAAA,EAAAA,IAAG,0BAGlB,GAFAb,EAAUc,QAAUF,EAEA,OAAjBA,EAAOE,QAyBV,OApBAF,EAAOG,KAAK,eAAgBT,GAG5BM,EAAOI,GAAG,iBAAkBzE,IACxBK,QAAQC,IAAY,OAARN,QAAQ,IAARA,OAAQ,EAARA,EAAUQ,SACtB6D,EAAOG,KAAK,WAAYP,EAAO,IAGnCI,EAAOI,GAAG,cAAezE,IAAaK,QAAQC,IAAY,OAARN,QAAQ,IAARA,OAAQ,EAARA,EAAUQ,SAAU2D,GAAU,EAAK,IAErFE,EAAOI,GAAG,WAAYC,IAClBrE,QAAQC,IAAI+D,EAAOjC,IACnB/B,QAAQC,IAAIoE,EAAInB,SAChBK,GAAY5E,GAAM,IAAIA,EAAM0F,IAAK,IAGrCL,EAAOI,GAAG,SAAUE,IAChBtE,QAAQC,IAAU,OAANqE,QAAM,IAANA,OAAM,EAANA,EAAQnE,QAAQ,IAGzB,KACFiD,EAAUc,UACXd,EAAUc,QAAQK,aAClBnB,EAAUc,QAAU,MAEtBJ,GAAU,GACVP,EAAY,GAAG,EA9BbvD,QAAQC,IAAI,iBA+Bf,GACH,CAAC2D,EAAQF,KAEXjE,EAAAA,EAAAA,YAAU,KAAO,IAAD+E,EACE,QAAdA,EAAAb,EAAOO,eAAO,IAAAM,GAAdA,EAAgBC,eAAe,CAACC,SAAU,UAAU,GACtD,CAACpB,IAEH,MAAMqB,EAAcjF,UAChB,IAAI8D,EAAM1F,SAAW+F,EAIjB,OAHA7D,QAAQC,IAAI,uBACR4D,GACA7D,QAAQC,IAAI,eAGpBmD,EAAUc,QAAQC,KAAK,UAAW,CAACvB,OAAQzD,EAAKW,IAAKoD,QAASM,EAAOoB,KAAMhB,IAC3EH,EAAS,GAAG,EAEhB,OACAzF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWE,SAAA,EACtBC,EAAAA,EAAAA,KAAA,MAAIH,UAAU,WAAUE,SAClBmF,EAASvF,OAAO,GAAMuF,EAASxC,KAAI,CAACX,EAAQ8B,KAAS7D,EAAAA,EAAAA,KAACoE,EAAO,CAAarC,QAASA,GAAhB8B,QAEzE7D,EAAAA,EAAAA,KAAA,OAAKyG,IAAKlB,KACV3F,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBE,SAAA,EAC/BC,EAAAA,EAAAA,KAAC0G,EAAAA,EAAK,CAACjH,MAAO2F,EAAOjF,SAAW2D,GAAIuB,EAASvB,EAAE6C,OAAOlH,OAAQY,OAAO,aACjEuG,UAAY9C,GAAa,UAARA,EAAE+C,KAAiBN,OACxCvG,EAAAA,EAAAA,KAAA,UAAQM,QAASiG,EAAYxG,SAAC,cAK1C,C,kCChGe,SAAS+G,EAAIC,GAAqB,IAApB,SAACC,GAAW,GAAMD,EAE3C,MAAM,OAACvB,IAAUyB,EAAAA,EAAAA,MACVC,EAAcjD,IAAmB5E,EAAAA,EAAAA,UAASmG,GAAU,MACrD2B,GAAaC,EAAAA,EAAAA,OACb,KAACrG,IAAQE,EAAAA,EAAAA,YAAWC,EAAAA,IAE1BG,EAAAA,EAAAA,YAAU,KACHmE,IAAS0B,GAAcjD,EAAgBuB,EAAO,GACnD,CAACA,EAAQ0B,KAGX7F,EAAAA,EAAAA,YAAU,KACDN,GACDoG,EAAW,IACf,GACD,CAACpG,EAAMoG,IAIV,MAAME,EAAoB1D,IACtBM,EAAgBN,GAChBwD,EAAW,SAASxD,IAAK,EAI7B,OAAIqD,GACQhH,EAAAA,EAAAA,KAACY,EAAQ,CAACqD,gBAAiBoD,KAGnCrH,EAAAA,EAAAA,KAACsH,EAAAA,EAAiB,CACdpH,MAAM,OACNqH,gBAAmBC,EACnBC,mBAAqB,aACrBC,iBAAiB,WACjBC,qBAAuB,SAAQ5H,UAG/BH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAME,SAAA,EACjBC,EAAAA,EAAAA,KAAC4H,EAAAA,EAAa,KACd5H,EAAAA,EAAAA,KAAC6H,EAAAA,EAAQ,KACTjI,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAiB8D,GAAG,iBAAgB5D,SAAA,EAC/CH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,UAASE,SAAA,EACpBC,EAAAA,EAAAA,KAAC0G,EAAAA,EAAK,CAACnH,KAAK,OAAOc,OAAO,YAAYP,WAAW,aAAagI,QAAQ,iBACtE9H,EAAAA,EAAAA,KAAA,UAAAD,SAAQ,cAEXmH,IAAkBlH,EAAAA,EAAAA,KAAC+E,EAAQ,CAACS,OAAQ0B,QAEzClH,EAAAA,EAAAA,KAACY,EAAQ,CAACqD,gBAAiBoD,QAI3C,C,qPCtCe,SAASU,IAEpB,MAAM,QAAC/G,IAAWC,EAAAA,EAAAA,YAAWC,EAAAA,GAI7B,OAAGF,GAAgBhB,EAAAA,EAAAA,KAAA,OAAAD,SAAK,gBAKpBC,EAAAA,EAAAA,KAACsH,EAAAA,EAAiB,CACdpH,MAAM,OACNqH,gBAAmBC,EACnBC,mBAAqB,aACrBC,iBAAiB,WACjBC,qBAAuB,SAAQ5H,UAG/BH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAME,SAAA,EACjBC,EAAAA,EAAAA,KAAC4H,EAAAA,EAAa,KACdhI,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBE,SAAA,EAC3BC,EAAAA,EAAAA,KAAC6H,EAAAA,EAAQ,KACT7H,EAAAA,EAAAA,KAACgI,EAAAA,EAAQ,CAACzI,KAAK,SACfS,EAAAA,EAAAA,KAAC8G,EAAAA,QAAI,CAACE,UAAU,WAKpC,C,0ECzCe,SAASiB,IAEpB,MAAOC,EAAQC,IAAY9I,EAAAA,EAAAA,UAAS,KAC7B+I,EAAWC,IAAehJ,EAAAA,EAAAA,UAAS,IACpC8H,GAAaC,EAAAA,EAAAA,OACb,wBAACkB,IAA2BrH,EAAAA,EAAAA,YAAWC,EAAAA,GAiBvCqH,EAAQC,KACVC,EAAAA,EAAAA,kBAAgB,KACZtB,EAAWqB,EAAK,GAClB,EAIN,OACIxI,EAAAA,EAAAA,KAACsH,EAAAA,EAAiB,CACdpH,MAAM,QACNqH,gBAAmBC,EACnBC,mBAAqB,SACrBiB,WAAW,oCACX7I,UAAU,mBAAkBE,UAE5BH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BE,SAAA,EACtCC,EAAAA,EAAAA,KAACkE,EAAAA,EAAW,CAAChE,MAAM,WACnBF,EAAAA,EAAAA,KAACf,EAAAA,EAAS,CAACM,KAAK,QAAQE,MAAOyI,EAAO7H,OAAO,QAAQF,SAAW2D,GAAMqE,EAASrE,EAAE6C,OAAOlH,UACxFO,EAAAA,EAAAA,KAACf,EAAAA,EAAS,CAACM,KAAK,WAAWE,MAAO2I,EAAU/H,OAAO,WAAWF,SAAW2D,GAAMuE,EAAYvE,EAAE6C,OAAOlH,UACpGO,EAAAA,EAAAA,KAAA,SAAOH,UAAU,gBAAgBS,QAlCxBgB,UACjBwC,EAAE6E,iBAEF,UACUC,EAAAA,EAAAA,IAA2BC,EAAAA,EAAMX,EAAQE,GAC3CE,EAAwBxC,SAASwC,EAAwBxC,WAC7DgD,EAAAA,EAAAA,IAAc,aAAcD,EAAAA,EAAKE,YAAYrH,KAC7CsH,MAAM,yBAEV,CACA,MAAMC,GACFD,MAAMC,EAAMlH,SACZH,QAAQC,IAAIoH,EAAO,GAsByC1J,KAAK,SAASE,MAAM,aAC5EG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,cAAaE,SAAA,EACxBC,EAAAA,EAAAA,KAAA,UAAQM,QAASA,IAAMiI,EAAK,KAAKxI,SAAC,qBAClCC,EAAAA,EAAAA,KAAA,UAAQM,QAASA,IAAMiI,EAAK,WAAWxI,SAAC,mBAK5D,CCnCA,QAZA,WAEI,MAAM,KAAEgB,IAASE,EAAAA,EAAAA,YAAWC,EAAAA,GAE5B,OACIlB,EAAAA,EAAAA,KAAA,OAAAD,SACMgB,GAAQf,EAAAA,EAAAA,KAAC+H,EAAI,KAAK/H,EAAAA,EAAAA,KAACiI,EAAS,KAI1C,C","sources":["components/base-components/FormField/FormField.js","components/ChatList/ChatList.js","components/Message/Message.js","components/ChatRoom/ChatRoom.js","pages/Chat/Chat.js","components/Home/Home.js","components/LoginForm/LoginForm.js","components/Dashboard.js"],"sourcesContent":["import { useState } from \"react\";\r\n\r\nimport \"./FormField.css\";\r\nimport show from \"../../../assets/images/icons/show-password-icon.png\";\r\nimport hide from \"../../../assets/images/icons/hide-password-icon.png\";\r\n\r\n\r\n/**\r\n * FormField: A base component for a form field, which includes a label and a corresponding input field.\r\n * The label is displayed as a tooltip when the input field is focused or has input.\r\n * The input field is required.\r\n * @param {Object} props - The properties for the FormField component.\r\n * @param {String} props.type - The type of the input field, e.g. \"text\", \"password\", etc.\r\n * @param {String} props.value - The value of the input field.\r\n * @param {Function} props.onChange - The callback function when the input field's value changes.\r\n * @param {String} props.prompt - The label for the input field.\r\n * @param {String} props.styleClass - Any additional CSS classes to be added to the component's root element.\r\n */\r\n\r\nexport default function FormField(props){\r\n    const [showPassword , setShowPassword] = useState(false);\r\n    const isPassword = props.type === \"password\";\r\n    const hasContent = props.value && props.value.trim().length > 0;\r\n    return(\r\n        <div className={`form-field ${props.styleClass}`} >\r\n            <input  name={props.type} \r\n                    type={isPassword && showPassword? \"text\" : props.type} \r\n                    title= {props.type} \r\n                    value={props.value} \r\n                    onChange={props.onChange} required/>\r\n            <span className={`popup_text ${hasContent ? \"has-content\" : \"\"}`}>{props.prompt}</span>\r\n            {isPassword && \r\n                <span onClick={() => setShowPassword(prev => !prev)}>\r\n                        <img  className=\"toggle-password\" src={showPassword ?hide:show} alt=\"password toggle\"/> </span>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n","import { useContext, useEffect, useState } from \"react\";\r\n\r\n//Context and tools\r\nimport { userContext } from \"../../UserProvider\";\r\nimport axiosInstance from \"../../axiosInstance\";\r\n\r\n//Components and styles\r\nimport \"./ChatList.css\"\r\nimport { findAvatarDB, findUserNameDB } from \"../../firebase/ReadWriteDB\";\r\nimport { extractAcronym } from \"../../utils\";\r\nimport ScreenTitle from \"../base-components/ScreenTitle/ScreenTitle\";\r\n\r\n\r\nexport default function ChatList(props){\r\n\r\n    \r\n    const [chatThumbnails, setChatThumbnails] = useState([]);\r\n    const {user, loading} = useContext(userContext);\r\n    const [chatList, setChatList] = useState([]);\r\n    \r\n    useEffect(()=>{\r\n        const fetchChatList = async () => {\r\n            const limit = 20;\r\n            try{\r\n                const response = await axiosInstance.get(`/chats/?userId=${user.uid}&limit=${limit}`);\r\n                if (response.status===200){\r\n                    console.log(response.data.message);\r\n                    console.log(response.data.chats);\r\n                    setChatList(response.data.chats);\r\n                }\r\n            }\r\n            catch(err){\r\n                console.log(err);\r\n                console.log(err.response?.data?.message);\r\n            }\r\n        }\r\n        fetchChatList();\r\n    }, [user]);\r\n    \r\n    useEffect(() => {\r\n        const fetchChatThumbnails = async (limit=-1) => {\r\n                if(limit<0 && chatList){\r\n                    console.log(\"Attempting to pull users's chats list names/images\")\r\n                    const thumbnails = await Promise.all(chatList.map(async (chatItem) => {\r\n                        const avatar = chatItem.isGroupChat\r\n                        ? await findAvatarDB(chatItem.creator)\r\n                        : await findAvatarDB(chatItem.participants.find(member => member !== user?.uid));\r\n\r\n                        console.log(avatar);\r\n                        console.log(chatItem);\r\n                        let label = \"N/A\"\r\n                        try{\r\n                            if(!chatItem.isGroupChat) \r\n                                label = await findUserNameDB(chatItem.participants.find(member => member !== user?.uid));\r\n                            else{\r\n                                const response = await axiosInstance.get(`/groups/search/${chatItem.group._id}`);\r\n                                if(response.status===200){\r\n                                    label = response.data.group.name;\r\n                                    console.log(label);\r\n                                }\r\n                            }\r\n                        }catch(err){\r\n                            console.log(err);\r\n                        }\r\n                        if(label?.length>10) label = extractAcronym(label).slice(0,3);\r\n                        console.log(`label: ${label} avatar: ${avatar}`);\r\n\r\n                        return {avatar, label};\r\n                    }));\r\n                    setChatThumbnails(thumbnails);\r\n                }\r\n        }\r\n        fetchChatThumbnails();\r\n    }, [chatList,user]);\r\n\r\n    const openChat =(chatIndex)=>{\r\n        console.log(\"opening chat\", chatIndex);\r\n        props.setChatSelected(chatIndex);\r\n    }\r\n    \r\n    if(loading) return <div>Loading...</div>;\r\n    \r\n    return(\r\n    <div className=\"docked-container\" id=\"chat-list-container\">\r\n        <ul className=\"chat-list\">\r\n            {chatThumbnails.map((thumbnail, index) => (\r\n                <li onClick={(e)=>openChat(chatList[index]._id)} className=\"grouped chat-item\" id=\"chat-i\" key={index}>\r\n                    <img id=\"chat-avatar\" src={thumbnail.avatar} alt={thumbnail.label} />\r\n                    <ScreenTitle title={thumbnail.label} designClass=\"chat-title\"/>\r\n                </li>\r\n            ))}\r\n        </ul>    \r\n    </div>\r\n\r\n    );\r\n}","import { useContext, useEffect, useState } from \"react\";\r\n\r\n//Context and tools\r\nimport { findAvatarDB, findUserNameDB } from \"../../firebase/ReadWriteDB\";\r\nimport { userContext } from \"../../UserProvider\";\r\nimport { timeSincePost } from \"../../utils\";\r\n\r\n//Components and styles\r\nimport \"./Message.css\";\r\n\r\nexport default function Message(props){\r\n    const [avatar, setAvatar] = useState(\"\");\r\n    const [userName, setUsername] = useState(\"\");\r\n    const {message} = props\r\n    const {user} = useContext(userContext);\r\n\r\n    useEffect(()=>{\r\n        const fetchAvatarAndUsername = async () => {\r\n            try{\r\n                const avatar = await findAvatarDB(message.author);\r\n                const username = await findUserNameDB(message.author);\r\n                setAvatar(avatar);\r\n                setUsername(username);\r\n            }\r\n            catch(err){\r\n                console.log(err);\r\n            }\r\n        }\r\n        fetchAvatarAndUsername();\r\n    }, [message.author]);\r\n\r\n\r\n    return(\r\n        <li className=\"message grouped\">\r\n            {message.author === user?.uid\r\n            ? (\r\n                <>\r\n                    <img src={avatar} alt={`message-avatar`} id=\"message-avatar\"/>\r\n                    <div className=\"message-content\">\r\n                        <div className=\"message-time\">{timeSincePost(message.timestamp)}</div>\r\n                        <div className=\"chat-bubble\">\r\n                            <div className=\"message-username\"><strong>{userName}</strong></div>\r\n                            <div className=\"message-text\">{message.content}</div>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )\r\n            : (\r\n                <>\r\n                <div className=\"message-content\">\r\n                    <div className=\"message-time right\">{timeSincePost(message.timestamp)}</div>\r\n                    <div className=\"chat-bubble right\">\r\n                        <div className=\"message-username right\"><strong>{userName}</strong></div>\r\n                        <div className=\"message-text right\">{message.content}</div>\r\n                    </div>\r\n                </div>\r\n                <img src={avatar} alt={`message-avatar`} id=\"message-avatar\"/>\r\n                </>\r\n            )}\r\n            \r\n        </li>\r\n    );\r\n}","import { useContext, useEffect, useRef, useState } from 'react';\r\nimport {io} from 'socket.io-client';\r\nimport axiosInstance from '../../axiosInstance';\r\nimport { userContext } from '../../UserProvider';\r\nimport Message from '../Message/Message';\r\nimport Field from '../base-components/Field/Field';\r\n\r\nimport \"./ChatRoom.css\"\r\n\r\n\r\n\r\n\r\nexport default function ChatRoom(props){\r\n    \r\n    const socketRef = useRef(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [input, setInput] = useState('');\r\n    const {user, token} = useContext(userContext);\r\n    const endRef = useRef(null);\r\n    const {chatId} = props;\r\n    const [joined, setJoined] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchMessage = async () => {\r\n            setMessages([]);\r\n            \r\n            try{\r\n                console.log(`Attempting to pull messages for chat ${chatId}`);\r\n                const response = await axiosInstance.get(`/chats/${chatId}`);\r\n                if (response.status===200){\r\n                    console.log(response.data.message);\r\n                    console.log(response.data.messages);\r\n                    setMessages(response.data.messages);\r\n                }\r\n            }\r\n            catch(err){\r\n                console.log(err);\r\n                console.log(err.response?.data?.message);\r\n            }\r\n        }\r\n        fetchMessage();\r\n    },[chatId]);\r\n\r\n\r\n    useEffect(() => {\r\n        if(!chatId || !token) return;\r\n        const socket = io('http://localhost:42069');\r\n        socketRef.current = socket; \r\n        \r\n        if(socket.current===null) {\r\n            console.log(`socket is null`);\r\n            return;};\r\n        //console.log(`token: ${token}`);\r\n       \r\n        socket.emit('authenticate', token);\r\n\r\n        \r\n        socket.on('authenticated', (response)=>{ \r\n            console.log(response?.message);\r\n            socket.emit('joinChat', chatId);\r\n        });\r\n        \r\n        socket.on('joinedChat', (response)=>{ console.log(response?.message); setJoined(true);});\r\n\r\n        socket.on('message', (msg) => {\r\n            console.log(socket.id);\r\n            console.log(msg.content);\r\n            setMessages(prev=>[...prev, msg]);\r\n        });\r\n\r\n        socket.on('error', (errObj) =>{\r\n            console.log(errObj?.message);            \r\n        });\r\n\r\n        return () => {\r\n          if(socketRef.current){\r\n            socketRef.current.disconnect();\r\n            socketRef.current = null;\r\n          }\r\n          setJoined(false);\r\n          setMessages([]);\r\n        }\r\n    },[chatId, token]);\r\n\r\n    useEffect(() => {\r\n        endRef.current?.scrollIntoView({behavior: \"smooth\"});\r\n    },[messages]);\r\n\r\n    const sendMessage = async () => {\r\n        if(!input.trim() || !joined){\r\n            console.log(`input is empty`);\r\n            if(!joined)\r\n                console.log(`not joined`);\r\n            return; //Empty string.\r\n        } \r\n        socketRef.current.emit('message', {author: user.uid, content: input, chat: chatId});\r\n        setInput('');\r\n    }\r\n    return(\r\n    <div className=\"chat-room\">\r\n        <ul className=\"messages\">\r\n            {(messages.length>0) && messages.map((message,index)=>(<Message key={index} message={message}/>))}\r\n        </ul>\r\n        <div ref={endRef}></div>\r\n        <div className=\"chat-input grouped\">\r\n            <Field value={input} onChange={(e)=>setInput(e.target.value)} prompt=\"Message...\"\r\n                onKeyDown={(e)=> e.key===\"Enter\" && sendMessage()}/>\r\n            <button onClick={sendMessage}>Send</button>\r\n        </div>\r\n    </div>\r\n\r\n    );\r\n}","import { useContext, useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\n\r\n//Context and tools\r\nimport { userContext } from \"../../UserProvider\";\r\n\r\n//Components and styles\r\nimport bg from \"../../assets/images/scrollableBackground.png\";\r\nimport ChatList from \"../../components/ChatList/ChatList\";\r\nimport ChatRoom from \"../../components/ChatRoom/ChatRoom\";\r\nimport SideMenu from \"../../components/SideMenu/SideMenu\";\r\nimport NavigationBar from \"../../components/base-components/NavigationBar/NavigationBar\";\r\nimport BackgroundWrapper from \"../../components/base-components/BackgroundWrapper\";\r\nimport Field from \"../../components/base-components/Field/Field\";\r\nimport \"./Chat.css\";\r\n\r\nexport default function Chat({miniView = false}){\r\n    \r\n    const {chatId} = useParams();\r\n    const [chatSelected, setChatSelected] = useState(chatId || null);\r\n    const navigation = useNavigate();\r\n    const {user} = useContext(userContext);\r\n\r\n    useEffect(()=>{\r\n        if(chatId!==chatSelected) setChatSelected(chatId);\r\n    },[chatId, chatSelected]);\r\n\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            navigation(\"/\");\r\n        }\r\n    }, [user, navigation]);\r\n\r\n\r\n\r\n    const handleChatSelect = (id)=>{\r\n        setChatSelected(id);\r\n        navigation(`/chat/${id}`);\r\n        \r\n    }\r\n    \r\n    if( miniView)\r\n        return (<ChatList setChatSelected={handleChatSelect}/>)\r\n\r\n    return(\r\n        <BackgroundWrapper\r\n            title=\"Chat\"\r\n            backgroundImage = {bg}\r\n            backgroundPosition = \"top center\"\r\n            backgroundRepeat=\"repeat-y\"\r\n            backgroundAttachment = \"scroll\"\r\n            >\r\n\r\n            <div className=\"chat\">\r\n                <NavigationBar/>\r\n                <SideMenu/>\r\n                <div className=\"page-container\" id=\"chat-container\">\r\n                    <div className=\"grouped\">\r\n                        <Field type=\"text\" prompt=\"Search...\" styleClass=\"search-bar\" styleId=\"chat-search\"/>\r\n                        <button>Search</button>\r\n                    </div>\r\n                    {chatSelected  && (<ChatRoom chatId={chatSelected} />) }   \r\n                </div>\r\n                <ChatList setChatSelected={handleChatSelect}/>\r\n            </div>\r\n        </BackgroundWrapper>\r\n    );\r\n}","import {useContext} from \"react\";\t\r\n\r\n// Context and tools\r\nimport {userContext} from \"../../UserProvider\";\r\nimport \"../../utils.css\";\r\n\r\n//Compononets and styles\r\nimport \"./Home.css\";\r\n//import CardForm from \"../CardForm/CardForm\";\r\n//import CardTable from \"../CardTable/CardTable\";\r\nimport BackgroundWrapper from \"../base-components/BackgroundWrapper\";\r\nimport bg from \"../../assets/images/scrollableBackground.png\";\r\nimport NavigationBar from \"../base-components/NavigationBar/NavigationBar\";\r\nimport PostFeed from \"../PostFeed/PostFeed\";\r\nimport SideMenu from \"../SideMenu/SideMenu\"; \r\nimport Chat from \"../../pages/Chat/Chat\";\r\n\r\n/**\r\n * A component that renders the main page of the application. The page is\r\n * divided into two sections. The top section contains a CardForm component\r\n * that allows the user to add a new row to the table. The bottom section\r\n * contains a CardTable component that displays the table with the rows that\r\n * the user has entered. The component uses the useState hook to store the\r\n * data in the table and the useEffect hook to fetch the data when the\r\n * component is mounted. The data is fetched from the reqres.in API. The\r\n * component also sets the page title and the background image of the page\r\n * when it is mounted.\r\n * \r\n * @returns A JSX element representing the Home component.\r\n */\r\nexport default function Home() {\r\n\r\n    const {loading} = useContext(userContext);\r\n\r\n\r\n    \r\n    if(loading) return <div>Loading...</div>;\r\n\r\n\r\n    return (\r\n        //Setting page general attributes\r\n        <BackgroundWrapper\r\n            title=\"Home\"\r\n            backgroundImage = {bg}\r\n            backgroundPosition = \"top center\"\r\n            backgroundRepeat=\"repeat-y\"\r\n            backgroundAttachment = \"scroll\"\r\n            >\r\n\r\n            <div className=\"home\">\r\n                <NavigationBar/>\r\n                <div className=\"page-container\">\r\n                    <SideMenu />\r\n                    <PostFeed type=\"all\"/>\r\n                    <Chat miniView={true}/>\r\n                </div>\r\n            </div>\r\n        </BackgroundWrapper>\r\n    );\r\n}","import { useState, startTransition, useContext } from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport {auth} from \"../../firebase/FireBase\";\r\n\r\n// Context and tools\r\nimport { writeToListDB } from '../../firebase/ReadWriteDB';\r\n\r\n\r\n//Compononets and styles\r\nimport BackgroundWrapper from \"../base-components/BackgroundWrapper\";\r\nimport ScreenTitle from \"../base-components/ScreenTitle/ScreenTitle\";\r\nimport FormField from \"../base-components/FormField/FormField\";\r\nimport \"./LoginForm.css\";\r\nimport \"../../utils.css\";\t\r\nimport bg from\"../../assets/images/Fox_in_forest_background.png\";\r\nimport { userContext } from \"../../UserProvider\";\r\n\r\nexport default function LoginForm() {\r\n    \r\n    const [email , setEmail] = useState(\"\");\r\n    const [password , setPassword] = useState(\"\");\r\n    const navigation = useNavigate();\r\n    const {refreshStaleActivityVal} = useContext(userContext);\r\n\r\n    const handleSignIn = async (e) => {\r\n        e.preventDefault();\r\n       \r\n        try{\r\n            await signInWithEmailAndPassword(auth, email , password);\r\n            if (refreshStaleActivityVal.current) refreshStaleActivityVal.current();\r\n            writeToListDB(`/presence/`, auth.currentUser.uid);\r\n            alert(\"Signed In Successfully\");\r\n\r\n        }\r\n        catch(error){\r\n            alert(error.message);\r\n            console.log(error);}\r\n    }\r\n\r\n    const goTo = (path) => {\r\n        startTransition(() => {\r\n            navigation(path);\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <BackgroundWrapper\r\n            title=\"Login\"\r\n            backgroundImage = {bg}\r\n            backgroundPosition = \"center\"\r\n            transition=\"background-image 0.5s ease-in-out\"\r\n            className=\"center-container\">\r\n                \r\n            <div className=\"login auth-form-container\">\r\n                <ScreenTitle title=\"Login\"/>\r\n                <FormField type=\"email\" value={email} prompt=\"Email\" onChange={(e) => setEmail(e.target.value)}/>\r\n                <FormField type=\"password\" value={password} prompt=\"Password\" onChange={(e) => setPassword(e.target.value)}/>\r\n                <input className=\"submit-button\" onClick={handleSignIn} type=\"submit\" value=\"Sign in\"/>\r\n                <div className=\"links-group\">\r\n                    <button onClick={() => goTo(\"/\")}>Forgot Password</button>\r\n                    <button onClick={() => goTo(\"/signup\")}>Sign Up</button>\r\n                </div>\r\n            </div>\r\n        </BackgroundWrapper>\r\n    );\r\n}","\"use client\";\r\nimport { useContext } from \"react\";\r\n\r\n// Context and tools\r\nimport { userContext } from \"../UserProvider\";\r\nimport \"../utils.css\";\r\n\r\n// Components  \r\nimport Home from \"./Home/Home\";\r\nimport LoginForm from \"./LoginForm/LoginForm\";\r\n\r\n\r\n/**\r\n * A component that renders the main page of the application. If the user is \r\n * signed in, the component renders the Home component. If the user is not \r\n * signed in, the component renders the LoginForm component. The component \r\n * uses the userContext to determine if the user is signed in.\r\n * \r\n * @returns A JSX element representing the Dashboard component.\r\n */\r\nfunction Dashboard() {\r\n\r\n    const { user } = useContext(userContext);\r\n\r\n    return (\r\n        <div>\r\n            { user ? (<Home/>):(<LoginForm/>)\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Dashboard;"],"names":["FormField","props","showPassword","setShowPassword","useState","isPassword","type","hasContent","value","trim","length","_jsxs","className","styleClass","children","_jsx","name","title","onChange","required","prompt","onClick","prev","src","hide","show","alt","ChatList","chatThumbnails","setChatThumbnails","user","loading","useContext","userContext","chatList","setChatList","useEffect","async","response","axiosInstance","get","uid","status","console","log","data","message","chats","err","_err$response","_err$response$data","fetchChatList","arguments","undefined","thumbnails","Promise","all","map","_label","avatar","chatItem","isGroupChat","findAvatarDB","creator","participants","find","member","label","group","_id","findUserNameDB","extractAcronym","slice","fetchChatThumbnails","id","thumbnail","index","e","openChat","chatIndex","setChatSelected","ScreenTitle","designClass","Message","setAvatar","userName","setUsername","author","username","fetchAvatarAndUsername","_Fragment","timeSincePost","timestamp","content","ChatRoom","socketRef","useRef","messages","setMessages","input","setInput","token","endRef","chatId","joined","setJoined","fetchMessage","socket","io","current","emit","on","msg","errObj","disconnect","_endRef$current","scrollIntoView","behavior","sendMessage","chat","ref","Field","target","onKeyDown","key","Chat","_ref","miniView","useParams","chatSelected","navigation","useNavigate","handleChatSelect","BackgroundWrapper","backgroundImage","bg","backgroundPosition","backgroundRepeat","backgroundAttachment","NavigationBar","SideMenu","styleId","Home","PostFeed","LoginForm","email","setEmail","password","setPassword","refreshStaleActivityVal","goTo","path","startTransition","transition","preventDefault","signInWithEmailAndPassword","auth","writeToListDB","currentUser","alert","error"],"sourceRoot":""}