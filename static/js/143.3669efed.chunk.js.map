{"version":3,"file":"static/js/143.3669efed.chunk.js","mappings":"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","sources":["components/GroupCard/GroupCard.js","pages/Groups/Groups.js","hooks/useRequireAuth.js","components/ChatList/ChatList.js","components/Message/Message.js","components/ChatRoom/ChatRoom.js","pages/Chat/Chat.js","components/base-components/TabbedContent/TabbedContent.js"],"sourcesContent":["import { startTransition, useContext, useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n//Context and tools\r\nimport { userContext } from \"../../UserProvider\";\r\nimport { findAvatarDB, findUserNameDB } from \"../../firebase/ReadWriteDB\";\r\nimport axiosInstance from \"../../axiosInstance\";\r\n\r\n//Components and styles\r\nimport ScreenTitle from \"../base-components/ScreenTitle/ScreenTitle\";\r\nimport PopupModal, { ConfigureGroupWindow, InviteWindow, MembersListWindow, StatisticsNewImageWindow } from \"../base-components/PopupModal/PopupModal\";\r\nimport TabbedContent from \"../base-components/TabbedContent/TabbedContent\";\r\nimport \"./GroupCard.css\"\r\nimport defaultGroupImage from \"../../assets/images/icons/groups-icon.png\";\r\n\r\n/**\r\n * \r\n * @param {object} props - Object to contain key-value pairs of arguments for the function.\r\n * @param {string} props.groupID \r\n * @param {string} props.chatID \r\n * @param {string} props.creationDate \r\n * @param {string} props.creator\r\n * @param {string} props.groupName\r\n * @param {string} props.groupImage\r\n * @param {[string]} props.members\r\n * @param {[string]} props.admins\r\n * @returns \r\n */\r\nexport default function GroupCard(props){\r\n\r\n    const {user, fetchImage} = useContext(userContext);\r\n    const {creator,  groupID, chatID} = props //Don't change - no need for useState.\r\n    const [groupName, setGroupName] = useState(props.groupName);\r\n    const [groupImage, setGroupImage] = useState(null);\r\n    const [members, setMembers] = useState(props.members);\r\n    const [membersAvatars, setMembersAvatars] = useState([]);\r\n    const [membersUsernames, setMembersUsernames] = useState([]);\r\n    const [admins, setAdmins] = useState(props.admins);\r\n    const [isPopupOpen, setIsPopupOpen] = useState(false);\r\n    const [joinRequests, setJoinRequests] = useState(null);\r\n    const navigation = useNavigate();\r\n\r\n    const goTo = (path) => {\r\n        startTransition(() => {\r\n            navigation(path);\r\n        });\r\n    }\r\n    \r\n\r\n    useEffect(()=>{\r\n        const fetchGroupImage = async ()=>{\r\n\r\n            const img = props.groupImage;\r\n\r\n            if(typeof img === \"string\" && img.includes(\"static\"))\r\n                setGroupImage(img);\r\n            else{\r\n                try{\r\n                    const fetchedAvatar = await fetchImage(img._id, false);\r\n                    console.log(`groupImage:`,img);\r\n                    console.log(`fetchedAvatar: ${fetchedAvatar}`);\r\n                    setGroupImage(fetchedAvatar);\r\n\r\n                }catch(err){\r\n                    console.log(\"Error fetching group image, setting default.\" ,err);\r\n                }\r\n               \r\n            }\r\n        }\r\n\r\n        const fetchMembersImages = async (limit=-1) =>{\r\n            if(limit<0 && members){\r\n                const avatars = await Promise.all(members.map(async (member)=>{\r\n                    const avatar = await findAvatarDB(member);\r\n                    if(avatar.includes(\"static\"))\r\n                        return avatar;\r\n                    else{\r\n                        try{\r\n                            const fetchedAvatar = await fetchImage(avatar, false);\r\n                            return fetchedAvatar;\r\n                        }catch(err){\r\n                            console.log(\"Error fetching member avatar\" ,err);\r\n                            return \"\";\r\n                        }\r\n                       \r\n                    }\r\n                }));\r\n                setMembersAvatars(avatars);\r\n            }\r\n        }\r\n\r\n        const fetchMembersUsernames = async (limit=-1) =>{ \r\n            if(limit<0 && members){\r\n                const usernames = await Promise.all(members.map(async (member)=>{\r\n                    const username = await findUserNameDB(member);\r\n                    return {username,uid:member};\r\n                }));\r\n                setMembersUsernames(usernames);\r\n            }\r\n        }\r\n        fetchGroupImage();\r\n        fetchMembersImages();\r\n        fetchMembersUsernames();\r\n        \r\n    },[props.groupImage, creator, members, fetchImage]);\r\n\r\n\r\n    useEffect(()=>{\r\n        const fetchJoinRequestsData = async ()=>{\r\n            if(!props.joinRequests || props.joinRequests.length===0) return;\r\n\r\n            const data = await Promise.all(props.joinRequests.map(async (member)=>{\r\n                if(typeof member !== \"string\") return;\r\n                const username = await findUserNameDB(member);\r\n                const avatar = await findAvatarDB(member);\r\n                if(!username || !avatar){\r\n                    console.log('possible undefined hit');\r\n                    return null;\r\n                } \r\n                //console.log(`username: ${username}, uid: ${member}, avatar: ${avatar}`);\r\n                return {username, uid:member, avatar}; \r\n            }));\r\n            setJoinRequests(data.filter(Boolean));\r\n        \r\n        }\r\n        fetchJoinRequestsData();\r\n\r\n    },[props.joinRequests])\r\n\r\n    const isJoined = ()=>{\r\n        return members && members.includes(user.uid);\r\n    }\r\n\r\n    const isAdmin = ()=>{\r\n        return admins && admins.includes(user.uid);\r\n    }\r\n\r\n    const deleteGroup = async ()=>{\r\n        try{\r\n            const response = await axiosInstance.delete(`/groups/${groupID}`); \r\n            if (response.status===200){\r\n                console.log(response.data.message);\r\n                alert(response.data.message);\r\n                props.onDelete();\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n        }\r\n\r\n    }\r\n\r\n     const openPopup = ()=>{\r\n        setIsPopupOpen(true);\r\n    }\r\n\r\n    const closePopup = ()=>{\r\n        setIsPopupOpen(false);\r\n    }\r\n\r\n    const kickMember = async (kickedUID)=>{\r\n        try{\r\n            console.log(`Kicking ${kickedUID} by admin:${user.uid}`);\r\n            const response = await axiosInstance.delete(`/groups/kick/${kickedUID}?groupId=${groupID}`); \r\n            if (response.status===200){\r\n                console.log(response.data?.message);\r\n                alert(response.data?.message);\r\n                setMembers(response.data?.group?.members);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n        }\r\n\r\n    }\r\n\r\n    const renameGroup = async (newName) =>{\r\n        try{\r\n            console.log(`New group name: ${newName}`);\r\n            const response = await axiosInstance.put(`/groups/${groupID}`, {name:newName, admin:user.uid}); \r\n            if (response.status===200){\r\n                console.log(response.data.message);\r\n                alert(response.data.message);\r\n                setGroupName(newName);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n        }\r\n    }\r\n\r\n    const joinGroup = async ()=>{\r\n        try{\r\n            const payload = {groupId:groupID};\r\n            const response = await axiosInstance.post(`/groups/join/${user.uid}`, payload); \r\n            if (response.status===200){\r\n                console.log(response.data.message);\r\n                alert(response.data.message);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n        }\r\n    }\r\n\r\n    const leaveGroup = async ()=>{\r\n        try{\r\n            if (creator===user.uid){\r\n                deleteGroup();\r\n                return;\r\n            }\r\n            const response = await axiosInstance.delete(`/groups/leave/${user.uid}?groupId=${groupID}`); \r\n            if (response.status===200){\r\n                console.log(response.data.message);\r\n                alert(response.data.message);\r\n                setMembers(response.data?.group?.members);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n        }\r\n    }\r\n\r\n    const acceptMember = async(memberUID) =>{\r\n        try{\r\n            console.log(`Accepting ${memberUID} to group:${groupID}`);\r\n            const payload = {groupId:groupID};\r\n            const response = await axiosInstance.put(`/groups/accept/${memberUID}`, payload); \r\n            if (response.status===200){\r\n                console.log(response.data.message);\r\n                alert(response.data.message);\r\n                setMembers(response.data?.group?.members);\r\n                setJoinRequests(response.data?.group?.joinRequests);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n        }\r\n    }\r\n\r\n    const declineMember = async(memberUID) =>{\r\n        try{\r\n            console.log(`Rejecting ${memberUID}`);\r\n            const payload = {groupId:groupID};\r\n            const response = await axiosInstance.put(`/groups/decline/${memberUID}`, payload); \r\n            if (response.status===200){\r\n                console.log(response.data.message);\r\n                alert(response.data.message);\r\n                setMembers(response.data?.group?.members);\r\n                setJoinRequests(response.data?.group?.joinRequests);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n        }\r\n    }\r\n\r\n    const promoteMember = async(memberUID) =>{\r\n        try{\r\n            console.log(`Promoting ${memberUID} in group:${groupID}`);\r\n            const payload = {groupId:groupID};\r\n            const response = await axiosInstance.put(`/groups/promote/${memberUID}`, payload); \r\n            if (response.status===200){\r\n                console.log(response.data.message);\r\n                alert(response.data.message);\r\n                setMembers(response.data?.group?.members);\r\n                setAdmins(response.data?.group?.admins);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n        }\r\n    }\r\n\r\n    const updateUI = (newMembers)=>{\r\n        setMembers(newMembers);\r\n    }\r\n\r\n    return (\r\n        <div id=\"group-card\">\r\n          <div id=\"group-card-header\">\r\n            <div className=\"grouped\">\r\n                <img className=\"group-image\" src={groupImage || defaultGroupImage} alt=\"groupImage\"/>\r\n                <ScreenTitle title={groupName}/>\r\n            </div>\r\n            {isJoined() && (<button className=\"leave-btn\" title=\"Leave Group\" onClick={leaveGroup}></button>)}\r\n          </div>\r\n          <ul className=\"card-carousel\">\r\n            {membersAvatars && membersAvatars.map((avatar,index)=>{\r\n                if (index<5){\r\n                    return (  <li key={index} className=\"card-carousel-item\">\r\n                        <img className=\"group-member-avatar\" src={avatar} alt=\"usersAvatar\"/>\r\n                    </li>);\r\n                }\r\n                else return null;\r\n            }\r\n            )}\r\n          </ul>\r\n          <div id=\"group-card-footer\">\r\n            { /*The logic here is basically: If not joined -> display Join. If joined, explore, if joined and admin, display manage/del*/\r\n            !isJoined() \r\n            ? (<button onClick={joinGroup}>Join</button>)\r\n            :(<div>\r\n                <button title=\"Explore\" className=\"explore-btn\" onClick={(e)=>goTo(`/groups/feed/${groupID}`)}/>\r\n                <button title=\"Chat\"className=\"chat-btn\" onClick={(e)=>goTo(`/chat/${chatID}`)}/>\r\n                {isAdmin() && (<div className=\"grouped\">\r\n                <button onClick={() => openPopup()}>Manage</button>\r\n                <button onClick={deleteGroup}>Delete</button>\r\n                </div>)}\r\n            </div> )}\r\n          </div>\r\n          <PopupModal isOpen={isPopupOpen} onClose={closePopup} styleId=\"invite-modal\">\r\n           <TabbedContent\r\n                tabs={[\"New Name\",\"Members\", \"Invite\", \"New Image\"]}\r\n                tabsContent={[\r\n                    <ConfigureGroupWindow \r\n                        groupName={groupName} onRenameGroup={(newGroupName)=>renameGroup(newGroupName)} \r\n                        joinRequests={joinRequests} onAcceptInvite={acceptMember} onDeclineInvite={declineMember}/>,\r\n                    <MembersListWindow self={user.uid} members={membersUsernames} membersAvatars={membersAvatars} \r\n                    admins={admins} removeMember={kickMember} onPromote={promoteMember}/>,\r\n                    <InviteWindow onInviteFriend={(e, inviteMember)=>props.onInvite(e, inviteMember, groupID, updateUI)}/>,\r\n                    <StatisticsNewImageWindow groupId={groupID} />\r\n                ]}\r\n                tabStyleId=\"manage-group-tabs\"\r\n           />\r\n\r\n          </PopupModal>\r\n        </div>\r\n    );\r\n}","import { useContext, useState, useEffect} from \"react\";\r\n\r\n//Context and tools\r\nimport { userContext } from \"../../UserProvider\";\r\nimport { useRequireAuth } from \"../../hooks/useRequireAuth\";\r\nimport axiosInstance from \"../../axiosInstance\";\r\nimport { findUIDbyUsername } from \"../../firebase/ReadWriteDB\";\r\n\r\n// Components and styling\r\nimport bg from \"../../assets/images/background-postfeed-light.png\";\r\nimport BackgroundWrapper from \"../../components/base-components/BackgroundWrapper\";\r\nimport NavigationBar from \"../../components/base-components/NavigationBar/NavigationBar\";\r\nimport SideMenu from \"../../components/SideMenu/SideMenu\";\r\nimport Field from \"../../components/base-components/Field/Field\";\r\nimport PopupModal, { InviteWindow } from \"../../components/base-components/PopupModal/PopupModal\";\r\nimport GroupCard from \"../../components/GroupCard/GroupCard\";\r\nimport Chat from \"../Chat/Chat\";\r\nimport \"./Groups.css\"\r\n\r\nexport default function Groups(props) {\r\n\r\n    const {user, loading} = useContext(userContext);\r\n    const {results} = props\r\n    useRequireAuth();\r\n\r\n    const [groups, setGroups] = useState([]);\r\n    const [newGroupName, setNewGroupName] = useState(\"\");\r\n    const [inviteGroupId, setInviteGroupId] = useState(\"\");\r\n\r\n    //Pop up\r\n    const [isPopupOpen, setIsPopupOpen] = useState(false);\r\n\r\n    useEffect(()=>{\r\n        const fetchGroups = async ()=>{\r\n            const limit = 20;\r\n            try{\r\n                const response = await axiosInstance.get(`/groups/?limit=${limit}`);\r\n                if(response.status===200){\r\n                    console.log(response.data.message);\r\n                    console.log(response.data.groups);\r\n                    setGroups(response.data.groups);\r\n                }\r\n            }\r\n            catch(err){\r\n                console.log(err);\r\n                console.log(err.response?.data?.message);\r\n            }\r\n        }\r\n\r\n        if(!results || results.length===0)\r\n            fetchGroups();\r\n        else\r\n            setGroups(results);\r\n\r\n    },[results]);\r\n\r\n\r\n    const openPopup = (groupId)=>{\r\n        setIsPopupOpen(true);\r\n        setInviteGroupId(groupId);\r\n    }\r\n\r\n    const closePopup = ()=>{\r\n        setIsPopupOpen(false);\r\n    }\r\n\r\n    const createGroup = async ()=> {\r\n        const payload = {creator:user.uid, name: newGroupName};\r\n        try{\r\n            const response = await axiosInstance.post(\"/groups\", payload);\r\n            const {group, message} = response.data;\r\n            if(response.status===201){\r\n                console.log(message);\r\n                console.log(group);\r\n                setGroups((prev)=>[...prev, group]);\r\n                openPopup(group._id);\r\n            }\r\n            else{\r\n                console.log(response.data?.message);\r\n            }\r\n\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n        }\r\n    }\r\n    const inviteFriend = async (e, userName=\"\" , groupId, updateUI=null)=>{\r\n        \r\n        if(inviteGroupId===\"\" && !groupId ) return;\r\n\r\n        try{\r\n            console.log(`Inviting ${userName}`);\r\n            const userObj = await findUIDbyUsername(userName);\r\n            if(!userObj) return alert(\"User not found.\");\r\n            const userId = Object.keys(userObj)[0];\r\n            console.log(`DB UserID: ${userId}`);\r\n\r\n            const payloadGroupID = groupId? groupId : inviteGroupId;\r\n            console.log(`groupId: ${payloadGroupID}`);\r\n            const payload= {groupId:payloadGroupID};\r\n            const response = await axiosInstance.put(`/groups/invite/${userId}`, payload);\r\n            if(response.status===200){\r\n                console.log(response.data.message);\r\n                setGroups((prev)=>prev.map((group)=> group._id===payloadGroupID? response.data.group: group ));\r\n                alert(`Invited ${userName} to the group successfully.`);\r\n                if(updateUI) updateUI(response.data.group.members);\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            console.log(err.response?.data?.message);\r\n            alert(err.response?.data?.message);\r\n            console.log(err.response?.data?.error);\r\n        }\r\n        \r\n    }\r\n\r\n    if(loading) return <div>Loading...</div>;\r\n\r\n    return(\r\n        <BackgroundWrapper\r\n            title=\"Groups\"\r\n            backgroundImage = {bg}\r\n            backgroundPosition = \"top center\"\r\n            backgroundRepeat=\"repeat-y\"\r\n            backgroundAttachment = \"scroll\"\r\n            >\r\n                \r\n            <div className=\"groups\">\r\n                <NavigationBar/>\r\n                <div className=\"page-container\" id=\"groups-page-container\">\r\n                    <SideMenu />\r\n                    <div id=\"group-list-wrapper\">\r\n                        <div id=\"new-group-form\">\r\n                            <Field\r\n                                inputStyle=\"new-group-field\"\r\n                                type=\"text\"\r\n                                value={newGroupName}\r\n                                onChange={(e)=>setNewGroupName(e.target.value)}\r\n                                prompt=\"New group name..\"/>\r\n                            <button className=\"submit-button\" id=\"create-group-button\" \r\n                                    onClick={()=>{\r\n                                        if(window.confirm(`Are you sure you want to create the group ${newGroupName}?`)){\r\n                                            createGroup();\r\n                                        }\r\n                                        }}>\r\n                                Create\r\n                            </button>\r\n                        </div>\r\n                        <div id=\"groups-list\">\r\n                            {user && groups.length>0 && groups.map((group)=>(\r\n                            <GroupCard\r\n                                key={group._id}\r\n                                groupID={group._id}\r\n                                groupImage={group.logo}\r\n                                groupName={group.name}\r\n                                creator={group.creator}\r\n                                creationDate={group.creationDate}\r\n                                members={group.members}\r\n                                admins={group.admins}\r\n                                chatID={group.chatId}\r\n                                joinRequests={group.joinRequests}\r\n                                onDelete={()=>{\r\n                                    const newGroups = groups.filter((g)=>g._id!==group._id);\r\n                                    setGroups(newGroups);\r\n                                }}\r\n                                onInvite={inviteFriend}\r\n\r\n                            />))}\r\n                        </div>\r\n                    </div>\r\n                    <Chat miniView={true}/>\r\n                    \r\n                </div>\r\n                <PopupModal styleId=\"invite-popup\" onClose={closePopup} isOpen={isPopupOpen}>\r\n                    <InviteWindow onInviteFriend={inviteFriend}/>\r\n                </PopupModal>\r\n            </div>\r\n\r\n        </BackgroundWrapper>\r\n    );\r\n}","\r\n//**This componet will be used to verify user's authentication and redirect\r\n// the user to the home page if authentication expires, instead of implementing this \r\n// redirection logic in every component, we'll just include this hook in every page component */\r\n\r\nimport { startTransition, useContext, useEffect } from \"react\";\r\nimport { userContext } from \"../UserProvider\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\n\r\n\r\nexport function useRequireAuth(){\r\n    \r\n    const {user, loading} = useContext(userContext);\r\n    \r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    \r\n    useEffect(()=>{   \r\n        const goto = (path, options={}) => {\r\n            startTransition(() => {\r\n                navigate(path, options);\r\n            });\r\n        };\r\n\r\n        if(location === \"/\")\r\n            return;\r\n\r\n        if (location === \"/home\" && !user)\r\n            goto(\"/login\");\r\n\r\n        if(loading && !user)\r\n            console.log(\"User authentication is loading...\");\r\n\r\n        if(!loading && !user){\r\n            console.log(\"User is not logged in. Redirecting to login page...\");\r\n            goto(\"/\");\r\n        }\r\n            \r\n    },[user,loading, location, navigate]);\r\n}","import { useContext, useEffect, useState } from \"react\";\r\n\r\n//Context and tools\r\nimport { userContext } from \"../../UserProvider\";\r\nimport { extractAcronym } from \"../../utils\";\r\nimport { findAvatarDB, findUserNameDB } from \"../../firebase/ReadWriteDB\";\r\nimport axiosInstance from \"../../axiosInstance\";\r\n\r\n//Components and styles\r\nimport \"./ChatList.css\"\r\nimport ScreenTitle from \"../base-components/ScreenTitle/ScreenTitle\";\r\n\r\n\r\nexport default function ChatList(props){\r\n\r\n    \r\n    const [chatThumbnails, setChatThumbnails] = useState([]);\r\n    const {user, loading, fetchImage} = useContext(userContext);\r\n    const [chatList, setChatList] = useState([]);\r\n    \r\n    useEffect(()=>{\r\n        const fetchChatList = async () => {\r\n            const limit = 20;\r\n            try{\r\n                const response = await axiosInstance.get(`/chats/?userId=${user.uid}&limit=${limit}`);\r\n                if (response.status===200){\r\n                    //DEBUG: console.log(response.data.message);\r\n                    //DEBUG: console.log(response.data.chats);\r\n                    setChatList(response.data.chats);\r\n                }\r\n            }\r\n            catch(err){\r\n                console.log(err);\r\n                console.log(err.response?.data?.message);\r\n            }\r\n        }\r\n        fetchChatList();\r\n    }, [user]);\r\n    \r\n    useEffect(() => {\r\n        const fetchChatThumbnails = async (limit=-1) => {\r\n                if(limit<0 && chatList){\r\n                    if(!user) return;\r\n                    //DEBUG: console.log(\"Attempting to pull users's chats list names/images\")\r\n                    const thumbnails = await Promise.all(chatList.map(async (chatItem) => {\r\n                        let avatar = chatItem.isGroupChat\r\n                        ? await findAvatarDB(chatItem.creator)\r\n                        : await findAvatarDB(chatItem.participants.find(member => member !== user?.uid));\r\n\r\n                        if(chatItem.group?.logo && chatItem.isGroupChat){\r\n                            console.log(\"Attempting to fetch group logo\");\r\n                            const fetchedAvatar = await fetchImage(chatItem.group?.logo, false);\r\n                            if(fetchedAvatar)\r\n                                avatar = fetchedAvatar;\r\n                        }\r\n                        else{\r\n                            if(!avatar.includes(\"static\")){\r\n                                const fetchedAvatar = await fetchImage(avatar, false);\r\n                                if(fetchedAvatar)\r\n                                    avatar = fetchedAvatar;\r\n                            }\r\n                        }\r\n\r\n                        console.log(avatar);\r\n                        console.log(chatItem);\r\n                        let label = \"N/A\"\r\n                        try{\r\n                            if(!chatItem.isGroupChat) \r\n                                label = await findUserNameDB(chatItem.participants.find(member => member !== user?.uid));\r\n                            else {\r\n                                const response = await axiosInstance.get(`/groups/search/${chatItem.group._id}`);\r\n                                if(response.status===200){\r\n                                    label = response.data.group.name;\r\n                                    console.log(label);\r\n                                }\r\n                            }\r\n                        }catch(err){\r\n                            console.log(err);\r\n                        }\r\n                        if(label?.length>10) {\r\n                            if(label.split(\" \").length>1)\r\n                                label = extractAcronym(label).slice(0,3);          \r\n                            else\r\n                                label = label.slice(0,7);\r\n                        }\r\n                        //DEBUG: console.log(`label: ${label} avatar: ${avatar}`);\r\n\r\n                        return {avatar, label};\r\n                    }));\r\n                    setChatThumbnails(thumbnails);\r\n                }\r\n        }\r\n        fetchChatThumbnails();\r\n    }, [chatList,user, fetchImage]);\r\n\r\n    const openChat =(chatIndex)=>{\r\n        console.log(\"opening chat\", chatIndex);\r\n        props.setChatSelected(chatIndex);\r\n    }\r\n    \r\n    if(loading) return <div>Loading...</div>;\r\n    \r\n    return(\r\n    <div className=\"docked-container\" id=\"chat-list-container\">\r\n        <ul className=\"chat-list\">\r\n            {chatThumbnails.map((thumbnail, index) => (\r\n                <li onClick={(e)=>openChat(chatList[index]._id)} className=\"grouped chat-item\" id=\"chat-i\" key={index}>\r\n                    <img id=\"chat-avatar\" src={thumbnail.avatar} alt={thumbnail.label} />\r\n                    <ScreenTitle title={thumbnail.label} designClass=\"chat-title\"/>\r\n                </li>\r\n            ))}\r\n        </ul>    \r\n    </div>\r\n\r\n    );\r\n}","import { useContext, useEffect, useState } from \"react\";\r\n\r\n//Context and tools\r\nimport { findAvatarDB, findUserNameDB } from \"../../firebase/ReadWriteDB\";\r\nimport { userContext } from \"../../UserProvider\";\r\nimport { timeSincePost } from \"../../utils\";\r\n\r\n//Components and styles\r\nimport \"./Message.css\";\r\n\r\nexport default function Message(props){\r\n    const [avatar, setAvatar] = useState(\"\");\r\n    const [userName, setUsername] = useState(\"\");\r\n    const {message} = props\r\n    const {user, fetchImage} = useContext(userContext);\r\n\r\n    useEffect(()=>{\r\n        const fetchAvatarAndUsername = async () => {\r\n            try{\r\n                const avatar = await findAvatarDB(message.author);\r\n                const username = await findUserNameDB(message.author);\r\n                console.log(\"avatar from message: \", avatar);\r\n                if(avatar.includes(\"static\")) \r\n                    setAvatar(avatar);\r\n                else{\r\n                    const fetchedAvatar = await fetchImage(avatar, false);\r\n\r\n                    if(fetchedAvatar)\r\n                        setAvatar(fetchedAvatar);\r\n                }\r\n                setUsername(username);\r\n            }\r\n            catch(err){\r\n                console.log(err);\r\n            }\r\n        }\r\n        fetchAvatarAndUsername();\r\n    }, [message.author, fetchImage]);\r\n\r\n\r\n    return(\r\n        <li className=\"message grouped\">\r\n            {message.author === user?.uid\r\n            ? (\r\n                <>\r\n                    <img src={avatar} alt={`message-avatar`} id=\"message-avatar\"/>\r\n                    <div className=\"message-content\">\r\n                        <div className=\"message-time\">{timeSincePost(message.timestamp)}</div>\r\n                        <div className=\"chat-bubble\">\r\n                            <div className=\"message-username\"><strong>{userName}</strong></div>\r\n                            <div className=\"message-text\">{message.content}</div>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )\r\n            : (\r\n                <>\r\n                <div className=\"message-content\">\r\n                    <div className=\"message-time right\">{timeSincePost(message.timestamp)}</div>\r\n                    <div className=\"chat-bubble right\">\r\n                        <div className=\"message-username right\"><strong>{userName}</strong></div>\r\n                        <div className=\"message-text right\">{message.content}</div>\r\n                    </div>\r\n                </div>\r\n                <img src={avatar} alt={`message-avatar`} id=\"message-avatar\"/>\r\n                </>\r\n            )}\r\n            \r\n        </li>\r\n    );\r\n}","import { useContext, useEffect, useRef, useState } from 'react';\r\nimport {io} from 'socket.io-client';\r\nimport axiosInstance from '../../axiosInstance';\r\nimport { userContext } from '../../UserProvider';\r\nimport Message from '../Message/Message';\r\nimport Field from '../base-components/Field/Field';\r\n\r\nimport \"./ChatRoom.css\"\r\n\r\n\r\n\r\n\r\nexport default function ChatRoom(props){\r\n    \r\n    const socketRef = useRef(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [input, setInput] = useState('');\r\n    const {user, token} = useContext(userContext);\r\n    const endRef = useRef(null);\r\n    const {chatId} = props;\r\n    const [joined, setJoined] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchMessage = async () => {\r\n            setMessages([]);\r\n            \r\n            try{\r\n                console.log(`Attempting to pull messages for chat ${chatId}`);\r\n                const response = await axiosInstance.get(`/chats/${chatId}`);\r\n                if (response.status===200){\r\n                    console.log(response.data.message);\r\n                    //DEBUG: console.log(response.data.messages);\r\n                    setMessages(response.data.messages);\r\n                }\r\n            }\r\n            catch(err){\r\n                console.log(err);\r\n                console.log(err.response?.data?.message);\r\n            }\r\n        }\r\n        fetchMessage();\r\n    },[chatId]);\r\n\r\n\r\n    useEffect(() => {\r\n        if(!chatId || !token) return;\r\n        const socket = io('http://localhost:42069');\r\n        socketRef.current = socket; \r\n        \r\n        if(socket.current===null) {\r\n            console.log(`socket is null`);\r\n            return;};\r\n        //console.log(`token: ${token}`);\r\n       \r\n        socket.emit('authenticate', token);\r\n\r\n        \r\n        socket.on('authenticated', (response)=>{ \r\n            console.log(response?.message);\r\n            socket.emit('joinChat', chatId);\r\n        });\r\n        \r\n        socket.on('joinedChat', (response)=>{ console.log(response?.message); setJoined(true);});\r\n\r\n        socket.on('message', (msg) => {\r\n            //DEBUG: console.log(socket.id);\r\n            //DEBUG: console.log(msg.content);\r\n            setMessages(prev=>[...prev, msg]);\r\n        });\r\n\r\n        socket.on('error', (errObj) =>{\r\n            console.log(errObj?.message);            \r\n        });\r\n\r\n        return () => {\r\n          if(socketRef.current){\r\n            socketRef.current.disconnect();\r\n            socketRef.current = null;\r\n          }\r\n          setJoined(false);\r\n          setMessages([]);\r\n        }\r\n    },[chatId, token]);\r\n\r\n    useEffect(() => {\r\n        endRef.current?.scrollIntoView({behavior: \"smooth\"});\r\n    },[messages]);\r\n\r\n    const sendMessage = async () => {\r\n        if(!input.trim() || !joined){\r\n            console.log(`input is empty`);\r\n            if(!joined)\r\n                console.log(`not joined`);\r\n            return; //Empty string.\r\n        } \r\n        socketRef.current.emit('message', {author: user.uid, content: input, chat: chatId});\r\n        setInput('');\r\n    }\r\n    return(\r\n    <div className=\"chat-room\">\r\n        <ul className=\"messages\">\r\n            {(messages.length>0) && messages.map((message,index)=>(<Message key={index} message={message}/>))}\r\n        </ul>\r\n        <div ref={endRef}></div>\r\n        <div className=\"chat-input grouped\">\r\n            <Field value={input} onChange={(e)=>setInput(e.target.value)} prompt=\"Message...\"\r\n                onKeyDown={(e)=> e.key===\"Enter\" && sendMessage()}/>\r\n            <button onClick={sendMessage}>Send</button>\r\n        </div>\r\n    </div>\r\n\r\n    );\r\n}","import {  useEffect, useState } from \"react\";\r\n//import {useContext} from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\n\r\n//Context and tools\r\n//import { userContext } from \"../../UserProvider\";\r\nimport { useRequireAuth } from \"../../hooks/useRequireAuth\";\r\n\r\n//Components and styles\r\nimport bg from \"../../assets/images/background-postfeed-light.png\";\r\nimport ChatList from \"../../components/ChatList/ChatList\";\r\nimport ChatRoom from \"../../components/ChatRoom/ChatRoom\";\r\nimport SideMenu from \"../../components/SideMenu/SideMenu\";\r\nimport NavigationBar from \"../../components/base-components/NavigationBar/NavigationBar\";\r\nimport BackgroundWrapper from \"../../components/base-components/BackgroundWrapper\";\r\nimport Field from \"../../components/base-components/Field/Field\";\r\nimport \"./Chat.css\";\r\n\r\nexport default function Chat({miniView = false}){\r\n    \r\n    const {chatId} = useParams();\r\n    const [chatSelected, setChatSelected] = useState(chatId || null);\r\n    const navigation = useNavigate();\r\n    //const {user} = useContext(userContext);\r\n    useRequireAuth();\r\n\r\n    useEffect(()=>{\r\n        if(chatId!==chatSelected) setChatSelected(chatId);\r\n    },[chatId, chatSelected]);\r\n\r\n\r\n    const handleChatSelect = (id)=>{\r\n        setChatSelected(id);\r\n        navigation(`/chat/${id}`);\r\n        \r\n    }\r\n    \r\n    if( miniView)\r\n        return (<ChatList setChatSelected={handleChatSelect}/>)\r\n\r\n    return(\r\n        <BackgroundWrapper\r\n            title=\"Chat\"\r\n            backgroundImage = {bg}\r\n            backgroundPosition = \"top center\"\r\n            backgroundRepeat=\"repeat-y\"\r\n            backgroundAttachment = \"scroll\"\r\n            >\r\n\r\n            <div className=\"chat\">\r\n                <NavigationBar/>\r\n                <SideMenu/>\r\n                <div className=\"page-container\" id=\"chat-container\">\r\n                    <div className=\"grouped\">\r\n                        <Field type=\"text\" prompt=\"Search...\" styleClass=\"search-bar\" styleId=\"chat-search\"/>\r\n                        <button>Search</button>\r\n                    </div>\r\n                    {chatSelected  && (<ChatRoom chatId={chatSelected} />) }   \r\n                </div>\r\n                <ChatList setChatSelected={handleChatSelect}/>\r\n            </div>\r\n        </BackgroundWrapper>\r\n    );\r\n}","import { useState } from \"react\";\r\n\r\nimport \"./TabbedContent.css\";\r\n\r\n/**\r\n * TabbedContent: A functional component that creates a tabbed interface.\r\n * Given an array of strings (tab names) and an array of JSX elements (content),\r\n * it will create a tabbed interface with the given tab names and content,\r\n * and will switch between the content based on the selected tab.\r\n * The component will automatically default to the first tab.\r\n * @param {object} props - The properties for the TabbedContent component.\r\n * @param {string[]} props.tabs - An array of tab names.\r\n * @param {JSX.Element[]} props.content - An array of JSX elements to be used as the content for each tab.\r\n * @param {string} [props.tabStyleId] - An optional string to be used as the CSS id for each tab.\r\n */\r\nexport default function TabbedContent(props){\r\n\r\n    const [tab, setTab] = useState(props.tabs[0]); //Default to first tab\r\n\r\n    return(\r\n    <>\r\n        <div className=\"tabs\">\r\n            {props.tabs.map((tabItem, index)=>\r\n                <button key={index} className={`tab-link ${tab===tabItem? \"active\": \"\"}`} id={props.tabStyleId?? \"\"} onClick={() => setTab(tabItem)}>{tabItem.charAt(0).toUpperCase() + tabItem.slice(1)}</button>\r\n            )}\r\n        </div>\r\n\r\n            {props.tabsContent?.map((content, index)=>\r\n\r\n            <div key={index} className={`tab-content ${tab===props.tabs[index]? \"active\": \"\"}`} id={`tab-${props.tabs[index]}`}>\r\n                {content}\r\n            </div>\r\n            )}\r\n          \r\n    </>);\r\n}"],"names":["GroupCard","props","user","fetchImage","useContext","userContext","creator","groupID","chatID","groupName","setGroupName","useState","groupImage","setGroupImage","members","setMembers","membersAvatars","setMembersAvatars","membersUsernames","setMembersUsernames","admins","setAdmins","isPopupOpen","setIsPopupOpen","joinRequests","setJoinRequests","navigation","useNavigate","goTo","path","startTransition","useEffect","async","img","includes","fetchedAvatar","_id","console","log","err","fetchGroupImage","arguments","length","undefined","avatars","Promise","all","map","avatar","findAvatarDB","member","fetchMembersImages","usernames","username","findUserNameDB","uid","fetchMembersUsernames","data","filter","Boolean","fetchJoinRequestsData","isJoined","deleteGroup","response","axiosInstance","delete","status","message","alert","onDelete","_err$response","_err$response$data","updateUI","newMembers","_jsxs","id","children","className","_jsx","src","defaultGroupImage","alt","ScreenTitle","title","onClick","_response$data4","_response$data4$group","group","_err$response5","_err$response5$data","index","e","payload","groupId","post","_err$response4","_err$response4$data","PopupModal","isOpen","onClose","closePopup","styleId","TabbedContent","tabs","tabsContent","ConfigureGroupWindow","onRenameGroup","newGroupName","newName","put","name","admin","_err$response3","_err$response3$data","renameGroup","onAcceptInvite","memberUID","_response$data5","_response$data5$group","_response$data6","_response$data6$group","_err$response6","_err$response6$data","onDeclineInvite","_response$data7","_response$data7$group","_response$data8","_response$data8$group","_err$response7","_err$response7$data","MembersListWindow","self","removeMember","kickedUID","_response$data","_response$data2","_response$data3","_response$data3$group","_err$response2","_err$response2$data","onPromote","_response$data9","_response$data9$group","_response$data10","_response$data10$grou","_err$response8","_err$response8$data","InviteWindow","onInviteFriend","inviteMember","onInvite","StatisticsNewImageWindow","tabStyleId","Groups","loading","results","useRequireAuth","groups","setGroups","setNewGroupName","inviteGroupId","setInviteGroupId","get","fetchGroups","createGroup","prev","inviteFriend","userName","userObj","findUIDbyUsername","userId","Object","keys","payloadGroupID","error","BackgroundWrapper","backgroundImage","bg","backgroundPosition","backgroundRepeat","backgroundAttachment","NavigationBar","SideMenu","Field","inputStyle","type","value","onChange","target","prompt","window","confirm","logo","creationDate","chatId","newGroups","g","Chat","miniView","navigate","location","useLocation","goto","options","ChatList","chatThumbnails","setChatThumbnails","chatList","setChatList","chats","fetchChatList","thumbnails","_chatItem$group","_label","chatItem","isGroupChat","participants","find","_chatItem$group2","label","split","extractAcronym","slice","fetchChatThumbnails","thumbnail","openChat","chatIndex","setChatSelected","designClass","Message","setAvatar","setUsername","author","fetchAvatarAndUsername","_Fragment","timeSincePost","timestamp","content","ChatRoom","socketRef","useRef","messages","setMessages","input","setInput","token","endRef","joined","setJoined","fetchMessage","socket","io","current","emit","on","msg","errObj","disconnect","_endRef$current","scrollIntoView","behavior","sendMessage","trim","chat","ref","onKeyDown","key","_ref","useParams","chatSelected","handleChatSelect","styleClass","_props$tabsContent","tab","setTab","tabItem","_props$tabStyleId","charAt","toUpperCase"],"sourceRoot":""}